<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–ø–∏—Å–æ–∫ –¥–µ–ª</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/vuex@4"></script>
</head>
<body>
  <div id="app">
    <h1>–ú–æ–π —Å–ø–∏—Å–æ–∫ –¥–µ–ª</h1>
    
    <div class="add-task">
      <input 
        v-model="newTask" 
        @keyup.enter="addTask" 
        placeholder="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É..."
      >
      <button @click="addTask">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="task-list">
      <div 
        v-for="(task, index) in tasks" 
        :key="index" 
        class="task-item"
      >
        <input 
          type="checkbox" 
          :checked="task.completed"
          @change="toggleTask(index)"
        >
        <span 
          class="task-text" 
          :class="{ completed: task.completed }"
        >
          {{ task.text }}
        </span>
        <button @click="removeTask(index)">üóëÔ∏è</button>
      </div>
      
      <div v-if="tasks.length === 0">
        –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—É—Å—Ç
      </div>
    </div>

    <div class="stats">
      –í—Å–µ–≥–æ: {{ totalTasks }} | –í—ã–ø–æ–ª–Ω–µ–Ω–æ: {{ completedTasks }}
    </div>
  </div>

  <script>
    const store = Vuex.createStore({
      state() {
        return {
          tasks: [
            { text: '–í—ã–≥—É–ª—è—Ç—å —Å–æ–±–∞–∫—É', completed: false },
            { text: '–ü–æ–º—ã—Ç—å –ø–æ—Å—É–¥—É', completed: true }
          ]
        }
      },
      mutations: {
        ADD_TASK(state, task) {
          state.tasks.push(task);
        },
        TOGGLE_TASK(state, index) {
          state.tasks[index].completed = !state.tasks[index].completed;
        },
        REMOVE_TASK(state, index) {
          state.tasks.splice(index, 1);
        }
      },
      actions: {
        addTask({ commit }, task) {
          commit('ADD_TASK', task);
        },
        toggleTask({ commit }, index) {
          commit('TOGGLE_TASK', index);
        },
        removeTask({ commit }, index) {
          commit('REMOVE_TASK', index);
        }
      },
      getters: {
        totalTasks: state => state.tasks.length,
        completedTasks: state => state.tasks.filter(t => t.completed).length
      }
    });

    const app = Vue.createApp({
      data() {
        return {
          newTask: ''
        }
      },
      computed: {
        tasks() {
          return this.$store.state.tasks;
        },
        totalTasks() {
          return this.$store.getters.totalTasks;
        },
        completedTasks() {
          return this.$store.getters.completedTasks;
        }
      },
      methods: {
        addTask() {
          if (this.newTask.trim()) {
            this.$store.dispatch('addTask', {
              text: this.newTask.trim(),
              completed: false
            });
            this.newTask = '';
          }
        },
        toggleTask(index) {
          this.$store.dispatch('toggleTask', index);
        },
        removeTask(index) {
          this.$store.dispatch('removeTask', index);
        }
      }
    });

    app.use(store);
    app.mount('#app');
  </script>
</body>
</html>